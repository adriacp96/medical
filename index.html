<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <title>Medical</title>
    <link rel="icon" href="https://i.imghippo.com/files/hdi6976Lw.png" type="image/png">
    <link rel="apple-touch-icon" href="https://i.imghippo.com/files/hdi6976Lw.png">
    <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
            touch-action: none;
            background-color: #ffffff; /* Fondo blanco puro solo en la parte exterior */
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4; /* Fondo gris claro como en el original */
            padding: 5px;
            text-align: center;
            display: flex;
            flex-direction: column;
        }

        .container {
            max-width: 375px;
            width: 100%;
            margin: 0 auto;
            background: white; /* Fondo blanco como en el original */
            padding: 5px;
            border-radius: 8px; /* Bordes redondeados como en el original */
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.1); /* Sombra como en el original */
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            align-items: center;
            flex-grow: 1;
            position: relative;
            height: calc(100vh - 10px);
            overflow: hidden;
        }

        h1, h2, h3, h4, p {
            text-align: center;
            margin: 5px 0;
        }

        h1 { font-size: 1.2em; }
        h2 { font-size: 1.2em; }
        h3 { font-size: 1em; color: #333; }
        h4 { font-size: 0.9em; color: #555; }

        .selection-section {
            text-align: center;
            width: 100%;
        }

        .selection-section button {
            width: 32%;
            margin: 5px 0.5%;
            padding: 8px;
            font-size: 0.9em;
            background: linear-gradient(135deg, #007BFF, #0056b3);
            color: white;
            border: none;
            border-radius: 6px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Sombra como en el original */
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .selection-section button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            background: linear-gradient(135deg, #0056b3, #003d82);
        }

        .block {
            margin-bottom: 10px;
            padding: 5px;
            border: 1px solid #ddd; /* Borde como en el original */
            border-radius: 4px; /* Bordes redondeados como en el original */
            background-color: #fafafa; /* Fondo gris claro como en el original */
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
            display: none;
            width: 100%;
            max-width: 100%;
            text-align: center;
            box-sizing: border-box;
        }

        .block.visible {
            opacity: 1;
            display: block;
        }

        .sub-block {
            margin-bottom: 10px;
            text-align: center;
        }

        .question {
            margin-bottom: 10px;
        }

        .option-buttons {
            display: flex;
            flex-wrap: nowrap;
            gap: 4px;
            overflow-x: auto;
            justify-content: center;
        }

        #airway-breathing-block .option-buttons {
            flex-wrap: nowrap;
            justify-content: center;
            overflow-x: auto;
            width: 100%;
            padding: 0 5px;
            box-sizing: border-box;
        }

        #airway-breathing-block .option-buttons button {
            flex: 0 0 auto;
            width: calc(25% - 5px);
            min-width: 0;
            font-size: 0.75em;
            padding: 4px 2px;
        }

        #airway-breathing-block .breathing-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
            width: 100%;
            padding: 0 5px;
            box-sizing: border-box;
            justify-content: center;
        }

        #airway-breathing-block .breathing-buttons button {
            width: calc(50% - 2px);
            font-size: 0.75em;
            padding: 4px 6px;
            box-sizing: border-box;
        }

        #airway-breathing-block .breathing-buttons button[name="breathing1"][value="not_breathing"] {
            width: 50%;
            margin-left: auto;
            margin-right: auto;
        }

        .option-buttons button {
            padding: 4px 8px;
            background: linear-gradient(135deg, #e0e0e0, #d0d0d0);
            border: none;
            border-radius: 6px;
            cursor: pointer;
            flex: 1 1 auto;
            min-width: 60px;
            font-size: 0.75em;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); /* Sombra como en el original */
            transition: all 0.2s;
        }

        .option-buttons button:hover {
            background: linear-gradient(135deg, #d0d0d0, #b0b0b0);
            transform: translateY(-1px);
        }

        .option-buttons button.selected {
            background: linear-gradient(135deg, #007BFF, #0056b3);
            color: white;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .option-buttons button[name="loc1"][value="conscious"] { background: linear-gradient(135deg, #28a745, #218838); color: white; }
        .option-buttons button[name="loc1"][value="semi-conscious"] { background: linear-gradient(135deg, #ffeb3b, #fbc02d); color: black; }
        .option-buttons button[name="loc1"][value="unconscious"] { background: linear-gradient(135deg, #dc3545, #c82333); color: white; }
        .option-buttons button[name="loc1"]:hover:not(.selected) { filter: brightness(85%); }

        .option-buttons button[name="airway1"][value="normal"] { background: linear-gradient(135deg, #28a745, #218838); color: white; }
        .option-buttons button[name="airway1"][value="abnormal"] { background: linear-gradient(135deg, #ffeb3b, #fbc02d); color: black; }
        .option-buttons button[name="airway1"][value="clear"] { background: linear-gradient(135deg, #ffb300, #ff8f00); color: black; }
        .option-buttons button[name="airway1"][value="obstructed"] { background: linear-gradient(135deg, #dc3545, #c82333); color: white; }
        .option-buttons button[name="airway1"]:hover:not(.selected) { filter: brightness(85%); }

        .breathing-buttons button[name="breathing1"][value="normal"] { background: linear-gradient(135deg, #28a745, #218838); color: white; }
        .breathing-buttons button[name="breathing1"][value="abnormal"] { background: linear-gradient(135deg, #ffeb3b, #fbc02d); color: black; }
        .breathing-buttons button[name="breathing1"][value="fast"] { background: linear-gradient(135deg, #ffee58, #ffca28); color: black; }
        .breathing-buttons button[name="breathing1"][value="slow"] { background: linear-gradient(135deg, #fff176, #ffd54f); color: black; }
        .breathing-buttons button[name="breathing1"][value="shallow"] { background: linear-gradient(135deg, #fdd835, #ffb300); color: black; }
        .breathing-buttons button[name="breathing1"][value="deep"] { background: linear-gradient(135deg, #ffb300, #ff8f00); color: black; }
        .breathing-buttons button[name="breathing1"][value="with_effort"] { background: linear-gradient(135deg, #ff8f00, #f57c00); color: white; }
        .breathing-buttons button[name="breathing1"][value="wizzy_sound"] { background: linear-gradient(135deg, #f57c00, #ef6c00); color: white; }
        .breathing-buttons button[name="breathing1"][value="not_breathing"] { background: linear-gradient(135deg, #dc3545, #c82333); color: white; }
        .breathing-buttons button[name="breathing1"]:hover:not(.selected) { filter: brightness(85%); }

        #circulation-block .option-buttons {
            flex-wrap: wrap;
        }
        #circulation-block .option-buttons button {
            flex: 0 0 calc(25% - 5px);
            min-width: 0;
        }

        .sample-entry, .dots-entry, .vital-entry {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 8px;
            width: 100%;
        }

        .sample-entry label, .dots-entry label, .vital-entry label {
            font-size: 0.9em;
            font-weight: bold;
            width: 20px;
            text-align: center;
            color: #333;
        }

        .sample-entry input[type="text"], .dots-entry input[type="text"], .vital-entry input[type="text"], .vital-entry input[type="number"] {
            flex: 1;
            padding: 5px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 0.8em;
            max-width: 250px;
        }

        .vital-entry select {
            flex: 1;
            padding: 5px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 0.8em;
            max-width: 250px;
        }

        .pain-slider-container {
            width: 100%;
            max-width: 250px;
            margin: 10px auto;
        }

        .pain-slider {
            -webkit-appearance: none;
            width: 100%;
            height: 10px;
            border-radius: 5px;
            background: linear-gradient(to right, #28a745, #ffeb3b, #dc3545);
            outline: none;
            opacity: 0.7;
            transition: opacity 0.2s;
        }

        .pain-slider:hover {
            opacity: 1;
        }

        .pain-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #007BFF;
            cursor: pointer;
        }

        .pain-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #007BFF;
            cursor: pointer;
        }

        button {
            width: 100%;
            padding: 8px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            margin-top: 5px;
            font-size: 0.9em;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Sombra como en el original */
            transition: all 0.2s;
            max-width: 200px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        #primary-assessment, #secondary-assessment, #vital-signs {
            display: none;
            width: 100%;
        }

        #vital-signs {
            position: relative;
            height: 100%;
        }

        .action-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            width: 100%;
            padding: 10px 0;
            flex-wrap: nowrap;
            position: absolute;
            bottom: 17px;
            left: 50%;
            transform: translateX(-50%);
        }

        .action-buttons button {
            width: 30px;
            height: 30px;
            border: none;
            background-color: transparent;
            cursor: pointer;
            transition: transform 0.2s;
            font-size: 20px;
            padding: 0;
            line-height: 30px;
            text-align: center;
            flex: 0 0 auto;
        }

        .action-buttons button:hover {
            transform: scale(1.1);
        }

        .action-buttons button:active {
            transform: scale(0.95);
        }

        .selection-buttons {
            display: flex;
            gap: 5px;
            justify-content: center;
            width: 100%;
            flex-wrap: nowrap;
        }

        .selection-buttons button.submit {
            background: linear-gradient(135deg, #28a745, #218838);
            color: white;
            margin: 10px auto;
            display: block;
        }

        .selection-buttons button.submit:hover {
            background: linear-gradient(135deg, #218838, #1c7430);
        }

        .secondary-buttons {
            display: flex;
            gap: 10px;
            justify-content: space-between;
            width: 100%;
            padding: 0 5px;
            box-sizing: border-box;
        }

        .secondary-buttons button {
            flex: 1;
            max-width: none;
            background: linear-gradient(135deg, #007BFF, #0056b3);
            color: white;
        }

        .secondary-buttons button:hover {
            background: linear-gradient(135deg, #0056b3, #003d82);
        }

        #summary-modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 355px;
            max-height: 80vh;
            background-color: #f9f9f9; /* Fondo gris claro como en el original */
            border: 1px solid #ddd; /* Borde como en el original */
            border-radius: 4px; /* Bordes redondeados como en el original */
            padding: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Sombra como en el original */
            z-index: 1000;
            overflow-y: auto;
            text-align: left;
            box-sizing: border-box;
        }

        #summary-modal h3 {
            margin: 0 0 5px 0;
            color: #007BFF;
            font-size: 1em;
            text-align: center;
        }

        #summary-modal ul {
            list-style: none;
            padding: 0;
            margin: 0;
            font-size: 0.8em;
        }

        #summary-modal li {
            margin-bottom: 5px;
            padding: 3px;
            background-color: #fff; /* Fondo blanco como en el original */
            border-radius: 4px; /* Bordes redondeados como en el original */
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1); /* Sombra como en el original */
        }

        #summary-modal li span {
            font-weight: bold;
            color: #333;
        }

        #summary-modal .close-button {
            position: absolute;
            top: 5px;
            right: 5px;
            width: 25px;
            height: 25px;
            font-size: 18px;
            background: none;
            border: none;
            cursor: pointer;
            color: #333;
        }

        #overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5); /* Fondo oscuro como en el original */
            z-index: 999;
        }

        .passenger-data {
            margin-top: 10px;
            padding: 10px;
            border: 1px solid #ddd; /* Borde como en el original */
            border-radius: 4px; /* Bordes redondeados como en el original */
            background-color: #f9f9f9; /* Fondo gris claro como en el original */
            display: flex;
            flex-direction: column;
            gap: 8px;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
            text-align: center;
        }

        .passenger-data .inline-group {
            display: flex;
            gap: 5px;
            width: 100%;
            justify-content: space-between;
            flex-wrap: nowrap;
        }

        .passenger-data .inline-group input[type="text"],
        .passenger-data .inline-group select {
            flex: 1;
            padding: 5px;
            margin: 0;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 0.8em;
            box-sizing: border-box;
            min-width: 0;
            text-align: center;
        }

        .passenger-data input[type="text"] {
            width: 100%;
            padding: 5px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 0.8em;
            box-sizing: border-box;
            text-align: center;
        }

        .vital-navigation {
            display: flex;
            justify-content: space-between;
            width: 100%;
            padding: 10px 0;
            position: absolute;
            bottom: 60px;
            left: 0;
        }

        .vital-navigation button {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #007BFF, #0056b3);
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.2s;
            margin: 0 10px;
        }

        .vital-navigation button:disabled {
            background: #cccccc;
            cursor: not-allowed;
        }

        .vital-navigation button:hover:not(:disabled) {
            transform: scale(1.1);
            background: linear-gradient(135deg, #0056b3, #003d82);
        }

        @media (max-width: 375px) {
            body { padding: 5px; }
            h1, h2 { font-size: 1em; }
            h3, h4 { font-size: 0.9em; }
            .selection-section button {
                font-size: 0.8em;
            }
            .option-buttons button {
                font-size: 0.7em;
            }
            #airway-breathing-block .option-buttons button {
                font-size: 0.65em;
            }
            #circulation-block .option-buttons button {
                flex: 0 0 calc(50% - 5px);
            }
            .passenger-data .inline-group {
                gap: 3px;
            }
            .vital-navigation button {
                width: 35px;
                height: 35px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Assessment</h1>

        <section id="selection" class="selection-section">
            <div class="passenger-data">
                <form id="additional-form" oninput="updateAdditionalInfo()">
                    <div class="inline-group">
                        <input type="text" name="seatNumber" placeholder="Seat (e.g., 1A)">
                        <input type="text" name="age" placeholder="Age (e.g., 35)">
                        <select name="gender">
                            <option value="">Gender</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="inline-group">
                        <select name="accompanied">
                            <option value="">Accompanied?</option>
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>
                        <select name="inTransit">
                            <option value="">In Transit?</option>
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>
                    </div>
                    <input type="text" name="timeOccurred" placeholder="Time (e.g., 14:00)">
                </form>
            </div>

            <h2>Select an Assessment</h2>
            <div class="selection-buttons">
                <button onclick="showPrimary()">Primary</button>
                <button onclick="showSecondary()">Secondary</button>
                <button onclick="showVitalSigns()">Vital Signs</button>
            </div>
        </section>

        <section id="primary-assessment">
            <h2>Primary Assessment</h2>
            <form id="primary-form">
                <div id="loc-block" class="block">
                    <h3>Consciousness</h3>
                    <div class="question">
                        <p>1. Level of consciousness?</p>
                        <div class="option-buttons">
                            <button type="button" name="loc1" value="conscious" onclick="selectOption('loc1', 'conscious')">Conscious</button>
                            <button type="button" name="loc1" value="semi-conscious" onclick="selectOption('loc1', 'semi-conscious')">Semi</button>
                            <button type="button" name="loc1" value="unconscious" onclick="selectOption('loc1', 'unconscious')">Unconscious</button>
                        </div>
                    </div>
                </div>

                <div id="airway-breathing-block" class="block">
                    <h3>Airway & Breathing</h3>
                    <div class="sub-block">
                        <h4>Airway</h4>
                        <div class="question">
                            <p>1. Airway status:</p>
                            <div class="option-buttons">
                                <button type="button" name="airway1" value="normal" onclick="selectOption('airway1', 'normal')">Normal</button>
                                <button type="button" name="airway1" value="abnormal" onclick="selectOption('airway1', 'abnormal')">Abnormal</button>
                                <button type="button" name="airway1" value="clear" onclick="selectOption('airway1', 'clear')">Clear</button>
                                <button type="button" name="airway1" value="obstructed" onclick="selectOption('airway1', 'obstructed')">Obstructed</button>
                            </div>
                        </div>
                    </div>
                    <div class="sub-block">
                        <h4>Breathing</h4>
                        <div class="question">
                            <p>2. Breathing status:</p>
                            <div class="breathing-buttons">
                                <button type="button" name="breathing1" value="normal" onclick="selectOption('breathing1', 'normal')">Normal</button>
                                <button type="button" name="breathing1" value="abnormal" onclick="selectOption('breathing1', 'abnormal')">Abnormal</button>
                                <button type="button" name="breathing1" value="fast" onclick="selectOption('breathing1', 'fast')">Fast</button>
                                <button type="button" name="breathing1" value="slow" onclick="selectOption('breathing1', 'slow')">Slow</button>
                                <button type="button" name="breathing1" value="shallow" onclick="selectOption('breathing1', 'shallow')">Shallow</button>
                                <button type="button" name="breathing1" value="deep" onclick="selectOption('breathing1', 'deep')">Deep</button>
                                <button type="button" name="breathing1" value="with_effort" onclick="selectOption('breathing1', 'with_effort')">Effort</button>
                                <button type="button" name="breathing1" value="wizzy_sound" onclick="selectOption('breathing1', 'wizzy_sound')">Wizzy</button>
                                <button type="button" name="breathing1" value="not_breathing" onclick="selectOption('breathing1', 'not_breathing')">Not</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="circulation-block" class="block">
                    <h3>Circulation</h3>
                    <div class="question">
                        <p>1. Circulation status:</p>
                        <div class="option-buttons">
                            <button type="button" name="circ1" value="normal" onclick="selectOption('circ1', 'normal')">Normal</button>
                            <button type="button" name="circ1" value="abnormal" onclick="selectOption('circ1', 'abnormal')">Abnormal</button>
                            <button type="button" name="circ1" value="pale" onclick="selectOption('circ1', 'pale')">Pale</button>
                            <button type="button" name="circ1" value="blue_lips" onclick="selectOption('circ1', 'blue_lips')">Blue Lips</button>
                            <button type="button" name="circ1" value="clammy_skin" onclick="selectOption('circ1', 'clammy_skin')">Clammy</button>
                            <button type="button" name="circ1" value="cold" onclick="selectOption('circ1', 'cold')">Cold</button>
                            <button type="button" name="circ1" value="numbness" onclick="selectOption('circ1', 'numbness')">Numb</button>
                            <button type="button" name="circ1" value="tingling" onclick="selectOption('circ1', 'tingling')">Tingle</button>
                            <button type="button" name="circ1" value="cold_limbs" onclick="selectOption('circ1', 'cold_limbs')">Cold Limbs</button>
                            <button type="button" name="circ1" value="signs_of_medical_shock" onclick="selectOption('circ1', 'signs_of_medical_shock')">Shock</button>
                            <button type="button" name="circ1" value="signs_of_bleeding" onclick="selectOption('circ1', 'signs_of_bleeding')">Bleeding</button>
                        </div>
                    </div>
                    <div class="selection-buttons">
                        <button type="button" class="submit" onclick="submitPrimary()">Submit</button>
                    </div>
                </div>
            </form>
        </section>

        <section id="secondary-assessment" style="display: none;">
            <h2>Secondary Assessment</h2>
            <div class="secondary-buttons">
                <button onclick="showSample()">SAMPLE</button>
                <button onclick="showDots()">DOTS</button>
            </div>

            <div id="sample-section" class="block">
                <form id="sample-form">
                    <div class="sample-entry">
                        <label>S</label>
                        <input type="text" name="signsSymptoms" placeholder="Signs and Symptoms">
                    </div>
                    <div class="sample-entry">
                        <label>A</label>
                        <input type="text" name="allergies" placeholder="Allergies">
                    </div>
                    <div class="sample-entry">
                        <label>M</label>
                        <input type="text" name="medications" placeholder="Medications">
                    </div>
                    <div class="sample-entry">
                        <label>P</label>
                        <input type="text" name="pastMedicalHistory" placeholder="Past Medical History">
                    </div>
                    <div class="sample-entry">
                        <label>L</label>
                        <input type="text" name="lastMeal" placeholder="Last Meal">
                    </div>
                    <div class="sample-entry">
                        <label>E</label>
                        <input type="text" name="events" placeholder="Events">
                    </div>
                    <div class="selection-buttons">
                        <button type="button" class="submit" onclick="submitSecondary()">Submit</button>
                    </div>
                </form>
            </div>

            <div id="dots-section" class="block">
                <form id="dots-form">
                    <div class="dots-entry">
                        <label>D</label>
                        <input type="text" name="deformities" placeholder="Deformities">
                    </div>
                    <div class="dots-entry">
                        <label>O</label>
                        <input type="text" name="openInjuries" placeholder="Open Injuries">
                    </div>
                    <div class="dots-entry">
                        <label>T</label>
                        <input type="text" name="tenderness" placeholder="Tenderness">
                    </div>
                    <div class="dots-entry">
                        <label>S</label>
                        <input type="text" name="swelling" placeholder="Swelling">
                    </div>
                    <div class="selection-buttons">
                        <button type="button" class="submit" onclick="submitSecondary()">Submit</button>
                    </div>
                </form>
            </div>
        </section>

        <section id="vital-signs">
            <h2>Vital Signs</h2>
            <form id="vital-form">
                <div id="vital-loc-block" class="block">
                    <h3>Level of Consciousness</h3>
                    <div class="vital-entry">
                        <input type="text" name="levelOfConsciousness" placeholder="Enter consciousness level">
                    </div>
                </div>
                <div id="vital-breathing-block" class="block">
                    <h3>Breathing</h3>
                    <div class="vital-entry">
                        <input type="number" name="breathing" placeholder="Enter breaths per minute">
                    </div>
                </div>
                <div id="vital-pulse-block" class="block">
                    <h3>Pulse Rate</h3>
                    <div class="vital-entry">
                        <input type="number" name="pulseRate" placeholder="Enter beats per minute">
                    </div>
                </div>
                <div id="vital-temperature-block" class="block">
                    <h3>Temperature</h3>
                    <div class="vital-entry">
                        <input type="number" name="temperature" placeholder="Enter temperature (°C)" step="0.1">
                    </div>
                </div>
                <div id="vital-pain-block" class="block">
                    <h3>Pain Assessment</h3>
                    <div class="pain-slider-container">
                        <input type="range" name="painAssessment" min="1" max="9" value="1" class="pain-slider" oninput="updatePainValue(this.value)">
                        <p>Pain Level: <span id="pain-value">1</span></p>
                    </div>
                </div>
                <div id="vital-oxygen-sat-block" class="block">
                    <h3>Oxygen SAT</h3>
                    <div class="vital-entry">
                        <input type="number" name="oxygenSat" placeholder="Enter oxygen saturation (%)">
                    </div>
                </div>
                <div id="vital-oxygen-provided-block" class="block">
                    <h3>Oxygen Provided</h3>
                    <div class="vital-entry">
                        <select name="oxygenProvided">
                            <option value="">Select</option>
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>
                    </div>
                </div>
                <div id="vital-oxygen-serial-block" class="block">
                    <h3>Oxygen Serial</h3>
                    <div class="vital-entry">
                        <input type="text" name="oxygenSerial" placeholder="Enter oxygen serial number">
                    </div>
                </div>
                <div id="vital-blood-pressure-block" class="block">
                    <h3>Blood Pressure</h3>
                    <div class="vital-entry">
                        <input type="number" name="bloodPressure" placeholder="Enter systolic/diastolic (e.g., 120)">
                    </div>
                </div>
                <div id="vital-glucose-block" class="block">
                    <h3>Glucose</h3>
                    <div class="vital-entry">
                        <input type="number" name="glucose" placeholder="Enter glucose level (mg/dL)">
                    </div>
                    <div class="selection-buttons">
                        <button type="button" class="submit" onclick="submitVitalSigns()">Submit</button>
                    </div>
                </div>
            </form>
            <div class="vital-navigation">
                <button onclick="prevVitalBlock()" id="prev-vital-btn">←</button>
                <button onclick="nextVitalBlock()" id="next-vital-btn">→</button>
            </div>
        </section>

        <div class="action-buttons">
            <button id="save-notes" onclick="saveToNotes()" title="Save">📥</button>
            <button id="view-summary" onclick="showSummary()" title="View Summary">🔍</button>
            <button id="clear-all" onclick="clearAll()" title="Clear">❌</button>
        </div>
    </div>

    <div id="overlay"></div>
    <div id="summary-modal">
        <button class="close-button" onclick="hideSummary()">x</button>
        <div id="summary-content"></div>
    </div>

    <script>
        let currentBlock = 0;
        const blocks = ["loc-block", "airway-breathing-block", "circulation-block"];
        const vitalBlocks = [
            "vital-loc-block", "vital-breathing-block", "vital-pulse-block", "vital-temperature-block",
            "vital-pain-block", "vital-oxygen-sat-block", "vital-oxygen-provided-block",
            "vital-oxygen-serial-block", "vital-blood-pressure-block", "vital-glucose-block"
        ];
        let currentVitalBlock = 0;
        const responses = {
            primary: {
                levelOfConsciousness: {},
                airwayAndBreathing: { airway: {}, breathing: {} },
                circulation: []
            },
            secondary: {},
            vitalSigns: {},
            additionalInfo: {}
        };

        function showPrimary() {
            document.getElementById("selection").style.display = "block";
            document.getElementById("primary-assessment").style.display = "block";
            document.getElementById("secondary-assessment").style.display = "none";
            document.getElementById("vital-signs").style.display = "none";
            currentBlock = 0;
            showBlock(currentBlock);
        }

        function showSecondary() {
            document.getElementById("selection").style.display = "block";
            document.getElementById("primary-assessment").style.display = "none";
            document.getElementById("secondary-assessment").style.display = "block";
            document.getElementById("vital-signs").style.display = "none";
            hideSecondarySections();
        }

        function showVitalSigns() {
            document.getElementById("selection").style.display = "block";
            document.getElementById("primary-assessment").style.display = "none";
            document.getElementById("secondary-assessment").style.display = "none";
            document.getElementById("vital-signs").style.display = "block";
            currentVitalBlock = 0;
            showVitalBlock(currentVitalBlock);
            updateVitalNavigationButtons();
        }

        function backToSelection() {
            document.getElementById("selection").style.display = "block";
            document.getElementById("primary-assessment").style.display = "none";
            document.getElementById("secondary-assessment").style.display = "none";
            document.getElementById("vital-signs").style.display = "none";
            hideAllBlocks();
            hideSecondarySections();
            hideAllVitalBlocks();
            updateAdditionalInfo();
        }

        function showBlock(index) {
            hideAllBlocks();
            const block = document.getElementById(blocks[index]);
            if (block) {
                block.classList.add("visible");
            }
        }

        function hideAllBlocks() {
            blocks.forEach(id => {
                const block = document.getElementById(id);
                if (block) {
                    block.classList.remove("visible");
                }
            });
        }

        function hideSecondarySections() {
            const sampleSection = document.getElementById("sample-section");
            const dotsSection = document.getElementById("dots-section");
            if (sampleSection) sampleSection.classList.remove("visible");
            if (dotsSection) dotsSection.classList.remove("visible");
        }

        function showVitalBlock(index) {
            hideAllVitalBlocks();
            const block = document.getElementById(vitalBlocks[index]);
            if (block) {
                block.classList.add("visible");
            }
        }

        function hideAllVitalBlocks() {
            vitalBlocks.forEach(id => {
                const block = document.getElementById(id);
                if (block) {
                    block.classList.remove("visible");
                }
            });
        }

        function selectOption(name, value) {
            if (name === "loc1") {
                responses.primary.levelOfConsciousness.loc1 = value;
                const buttons = document.getElementsByName(name);
                buttons.forEach(btn => {
                    btn.classList.remove("selected");
                    if (btn.value === value) btn.classList.add("selected");
                });
                if (currentBlock < blocks.length - 1) {
                    currentBlock++;
                    showBlock(currentBlock);
                }
            } else if (name === "airway1") {
                responses.primary.airwayAndBreathing.airway.airway1 = value;
                const buttons = document.getElementsByName(name);
                buttons.forEach(btn => {
                    btn.classList.remove("selected");
                    if (btn.value === value) btn.classList.add("selected");
                });
                if (responses.primary.airwayAndBreathing.airway.airway1 && responses.primary.airwayAndBreathing.breathing.breathing1) {
                    if (currentBlock < blocks.length - 1) {
                        currentBlock++;
                        showBlock(currentBlock);
                    }
                }
            } else if (name === "breathing1") {
                responses.primary.airwayAndBreathing.breathing.breathing1 = value;
                const buttons = document.getElementsByName(name);
                buttons.forEach(btn => {
                    btn.classList.remove("selected");
                    if (btn.value === value) btn.classList.add("selected");
                });
                if (responses.primary.airwayAndBreathing.airway.airway1 && responses.primary.airwayAndBreathing.breathing.breathing1) {
                    if (currentBlock < blocks.length - 1) {
                        currentBlock++;
                        showBlock(currentBlock);
                    }
                }
            } else if (name === "circ1") {
                const index = responses.primary.circulation.indexOf(value);
                if (index === -1) {
                    responses.primary.circulation.push(value);
                } else {
                    responses.primary.circulation.splice(index, 1);
                }
                const buttons = document.getElementsByName(name);
                buttons.forEach(btn => {
                    if (responses.primary.circulation.includes(btn.value)) {
                        btn.classList.add("selected");
                    } else {
                        btn.classList.remove("selected");
                    }
                });
            }
        }

        function showSample() {
            hideSecondarySections();
            const sampleSection = document.getElementById("sample-section");
            if (sampleSection) {
                sampleSection.classList.add("visible");
            }
        }

        function showDots() {
            hideSecondarySections();
            const dotsSection = document.getElementById("dots-section");
            if (dotsSection) {
                dotsSection.classList.add("visible");
            }
        }

        function submitPrimary() {
            if (responses.primary.levelOfConsciousness.loc1 &&
                responses.primary.airwayAndBreathing.airway.airway1 &&
                responses.primary.airwayAndBreathing.breathing.breathing1 &&
                responses.primary.circulation.length > 0) {
                console.log("Primary Assessment Responses:", responses.primary);
                updateSummary();
                backToSelection();
            } else {
                alert("Please complete all sections and select at least one circulation option.");
            }
        }

        function submitSecondary() {
            const sampleForm = document.getElementById("sample-form");
            const dotsForm = document.getElementById("dots-form");
            const sampleData = new FormData(sampleForm);
            const dotsData = new FormData(dotsForm);

            responses.secondary = {
                sample: {
                    signsSymptoms: sampleData.get("signsSymptoms"),
                    allergies: sampleData.get("allergies"),
                    medications: sampleData.get("medications"),
                    pastMedicalHistory: sampleData.get("pastMedicalHistory"),
                    lastMeal: sampleData.get("lastMeal"),
                    events: sampleData.get("events")
                },
                dots: {
                    deformities: dotsData.get("deformities"),
                    openInjuries: dotsData.get("openInjuries"),
                    tenderness: dotsData.get("tenderness"),
                    swelling: dotsData.get("swelling")
                }
            };

            console.log("Secondary Assessment Responses:", responses.secondary);
            updateSummary();
            backToSelection();
        }

        function prevVitalBlock() {
            if (currentVitalBlock > 0) {
                const vitalForm = document.getElementById("vital-form");
                const formData = new FormData(vitalForm);
                updateVitalResponses(formData);
                currentVitalBlock--;
                showVitalBlock(currentVitalBlock);
                updateVitalNavigationButtons();
            }
        }

        function nextVitalBlock() {
            const vitalForm = document.getElementById("vital-form");
            const formData = new FormData(vitalForm);
            updateVitalResponses(formData);
            if (currentVitalBlock < vitalBlocks.length - 1) {
                currentVitalBlock++;
                showVitalBlock(currentVitalBlock);
                updateVitalNavigationButtons();
            }
        }

        function updateVitalResponses(formData) {
            const currentInput = vitalBlocks[currentVitalBlock];
            if (currentInput === "vital-loc-block") responses.vitalSigns.levelOfConsciousness = formData.get("levelOfConsciousness");
            else if (currentInput === "vital-breathing-block") responses.vitalSigns.breathing = formData.get("breathing");
            else if (currentInput === "vital-pulse-block") responses.vitalSigns.pulseRate = formData.get("pulseRate");
            else if (currentInput === "vital-temperature-block") responses.vitalSigns.temperature = formData.get("temperature");
            else if (currentInput === "vital-pain-block") responses.vitalSigns.painAssessment = formData.get("painAssessment");
            else if (currentInput === "vital-oxygen-sat-block") responses.vitalSigns.oxygenSat = formData.get("oxygenSat");
            else if (currentInput === "vital-oxygen-provided-block") responses.vitalSigns.oxygenProvided = formData.get("oxygenProvided");
            else if (currentInput === "vital-oxygen-serial-block") responses.vitalSigns.oxygenSerial = formData.get("oxygenSerial");
            else if (currentInput === "vital-blood-pressure-block") responses.vitalSigns.bloodPressure = formData.get("bloodPressure");
            else if (currentInput === "vital-glucose-block") responses.vitalSigns.glucose = formData.get("glucose");
        }

        function updateVitalNavigationButtons() {
            const prevBtn = document.getElementById("prev-vital-btn");
            const nextBtn = document.getElementById("next-vital-btn");
            prevBtn.disabled = currentVitalBlock === 0;
            nextBtn.disabled = currentVitalBlock === vitalBlocks.length - 1;
        }

        function submitVitalSigns() {
            const vitalForm = document.getElementById("vital-form");
            const formData = new FormData(vitalForm);

            responses.vitalSigns = {
                levelOfConsciousness: formData.get("levelOfConsciousness"),
                breathing: formData.get("breathing"),
                pulseRate: formData.get("pulseRate"),
                temperature: formData.get("temperature"),
                painAssessment: formData.get("painAssessment"),
                oxygenSat: formData.get("oxygenSat"),
                oxygenProvided: formData.get("oxygenProvided"),
                oxygenSerial: formData.get("oxygenSerial"),
                bloodPressure: formData.get("bloodPressure"),
                glucose: formData.get("glucose")
            };

            if (Object.values(responses.vitalSigns).every(val => val !== null && val !== "")) {
                console.log("Vital Signs Responses:", responses.vitalSigns);
                updateSummary();
                backToSelection();
            } else {
                alert("Please complete all vital signs fields.");
            }
        }

        function updatePainValue(value) {
            document.getElementById("pain-value").textContent = value;
        }

        function updateSummary() {
            const summaryContent = document.getElementById("summary-content");
            const primary = responses.primary;
            const secondary = responses.secondary;
            const vitalSigns = responses.vitalSigns;
            const additional = responses.additionalInfo;

            let summaryHTML = "<h3>Summary</h3><ul>";

            if (additional.seatNumber) summaryHTML += `<li><span>Seat:</span> ${additional.seatNumber}</li>`;
            if (additional.age) summaryHTML += `<li><span>Age:</span> ${additional.age}</li>`;
            if (additional.gender) summaryHTML += `<li><span>Gender:</span> ${additional.gender}</li>`;
            if (additional.accompanied) summaryHTML += `<li><span>Accompanied:</span> ${additional.accompanied}</li>`;
            if (additional.inTransit) summaryHTML += `<li><span>In Transit:</span> ${additional.inTransit}</li>`;
            if (additional.timeOccurred) summaryHTML += `<li><span>Time:</span> ${additional.timeOccurred}</li>`;

            if (primary.levelOfConsciousness.loc1) {
                summaryHTML += `<li><span>Consciousness:</span> ${primary.levelOfConsciousness.loc1}</li>`;
            }
            if (primary.airwayAndBreathing.airway.airway1) {
                summaryHTML += `<li><span>Airway:</span> ${primary.airwayAndBreathing.airway.airway1}</li>`;
            }
            if (primary.airwayAndBreathing.breathing.breathing1) {
                summaryHTML += `<li><span>Breathing:</span> ${primary.airwayAndBreathing.breathing.breathing1}</li>`;
            }
            if (primary.circulation.length > 0) {
                summaryHTML += `<li><span>Circulation:</span> ${primary.circulation.join(", ")}</li>`;
            }

            if (secondary.sample && Object.keys(secondary.sample).length > 0) {
                summaryHTML += `<li><span>SAMPLE:</span></li>`;
                if (secondary.sample.signsSymptoms) summaryHTML += `<li>  S: ${secondary.sample.signsSymptoms}</li>`;
                if (secondary.sample.allergies) summaryHTML += `<li>  A: ${secondary.sample.allergies}</li>`;
                if (secondary.sample.medications) summaryHTML += `<li>  M: ${secondary.sample.medications}</li>`;
                if (secondary.sample.pastMedicalHistory) summaryHTML += `<li>  P: ${secondary.sample.pastMedicalHistory}</li>`;
                if (secondary.sample.lastMeal) summaryHTML += `<li>  L: ${secondary.sample.lastMeal}</li>`;
                if (secondary.sample.events) summaryHTML += `<li>  E: ${secondary.sample.events}</li>`;
            }

            if (secondary.dots && Object.keys(secondary.dots).length > 0) {
                summaryHTML += `<li><span>DOTS:</span></li>`;
                if (secondary.dots.deformities) summaryHTML += `<li>  D: ${secondary.dots.deformities}</li>`;
                if (secondary.dots.openInjuries) summaryHTML += `<li>  O: ${secondary.dots.openInjuries}</li>`;
                if (secondary.dots.tenderness) summaryHTML += `<li>  T: ${secondary.dots.tenderness}</li>`;
                if (secondary.dots.swelling) summaryHTML += `<li>  S: ${secondary.dots.swelling}</li>`;
            }

            if (vitalSigns.levelOfConsciousness) {
                summaryHTML += `<li><span>Vital Signs:</span></li>`;
                if (vitalSigns.levelOfConsciousness) summaryHTML += `<li>  Level of Consciousness: ${vitalSigns.levelOfConsciousness}</li>`;
                if (vitalSigns.breathing) summaryHTML += `<li>  Breathing: ${vitalSigns.breathing} breaths/min</li>`;
                if (vitalSigns.pulseRate) summaryHTML += `<li>  Pulse Rate: ${vitalSigns.pulseRate} beats/min</li>`;
                if (vitalSigns.temperature) summaryHTML += `<li>  Temperature: ${vitalSigns.temperature} °C</li>`;
                if (vitalSigns.painAssessment) summaryHTML += `<li>  Pain Assessment: ${vitalSigns.painAssessment}/9</li>`;
                if (vitalSigns.oxygenSat) summaryHTML += `<li>  Oxygen SAT: ${vitalSigns.oxygenSat}%</li>`;
                if (vitalSigns.oxygenProvided) summaryHTML += `<li>  Oxygen Provided: ${vitalSigns.oxygenProvided}</li>`;
                if (vitalSigns.oxygenSerial) summaryHTML += `<li>  Oxygen Serial: ${vitalSigns.oxygenSerial}</li>`;
                if (vitalSigns.bloodPressure) summaryHTML += `<li>  Blood Pressure: ${vitalSigns.bloodPressure} mmHg</li>`;
                if (vitalSigns.glucose) summaryHTML += `<li>  Glucose: ${vitalSigns.glucose} mg/dL</li>`;
            }

            summaryHTML += "</ul>";
            summaryContent.innerHTML = summaryHTML;
        }

        function showSummary() {
            document.getElementById("summary-modal").style.display = "block";
            document.getElementById("overlay").style.display = "block";
        }

        function hideSummary() {
            document.getElementById("summary-modal").style.display = "none";
            document.getElementById("overlay").style.display = "none";
        }

        function updateAdditionalInfo() {
            const additionalForm = document.getElementById("additional-form");
            const additionalData = new FormData(additionalForm);

            responses.additionalInfo = {
                seatNumber: additionalData.get("seatNumber"),
                age: additionalData.get("age"),
                gender: additionalData.get("gender"),
                accompanied: additionalData.get("accompanied"),
                inTransit: additionalData.get("inTransit"),
                timeOccurred: additionalData.get("timeOccurred")
            };

            updateSummary();
        }

        function saveToNotes() {
            const primary = responses.primary;
            const secondary = responses.secondary;
            const vitalSigns = responses.vitalSigns;
            const additional = responses.additionalInfo;

            let textContent = "Assessment Notes\n";
            textContent += "================\n\n";

            textContent += "Passenger Data:\n";
            textContent += "---------------\n";
            textContent += additional.seatNumber ? `Seat Number: ${additional.seatNumber}\n` : "";
            textContent += additional.age ? `Age: ${additional.age}\n` : "";
            textContent += additional.gender ? `Gender: ${additional.gender}\n` : "";
            textContent += additional.accompanied ? `Accompanied: ${additional.accompanied}\n` : "";
            textContent += additional.inTransit ? `In Transit: ${additional.inTransit}\n` : "";
            textContent += additional.timeOccurred ? `Time: ${additional.timeOccurred}\n` : "";
            textContent += "\n";

            textContent += "Primary Assessment:\n";
            textContent += "-------------------\n";
            textContent += primary.levelOfConsciousness.loc1 ? `Level of Consciousness: ${primary.levelOfConsciousness.loc1}\n` : "";
            textContent += primary.airwayAndBreathing.airway.airway1 ? `Airway: ${primary.airwayAndBreathing.airway.airway1}\n` : "";
            textContent += primary.airwayAndBreathing.breathing.breathing1 ? `Breathing: ${primary.airwayAndBreathing.breathing.breathing1}\n` : "";
            textContent += primary.circulation.length > 0 ? `Circulation: ${primary.circulation.join(", ")}\n` : "";
            textContent += "\n";

            textContent += "Secondary Assessment:\n";
            textContent += "---------------------\n";
            if (secondary.sample && Object.keys(secondary.sample).length > 0) {
                textContent += "SAMPLE:\n";
                textContent += secondary.sample.signsSymptoms ? `  Signs and Symptoms: ${secondary.sample.signsSymptoms}\n` : "";
                textContent += secondary.sample.allergies ? `  Allergies: ${secondary.sample.allergies}\n` : "";
                textContent += secondary.sample.medications ? `  Medications: ${secondary.sample.medications}\n` : "";
                textContent += secondary.sample.pastMedicalHistory ? `  Past Medical History: ${secondary.sample.pastMedicalHistory}\n` : "";
                textContent += secondary.sample.lastMeal ? `  Last Meal: ${secondary.sample.lastMeal}\n` : "";
                textContent += secondary.sample.events ? `  Events: ${secondary.sample.events}\n` : "";
            }
            if (secondary.dots && Object.keys(secondary.dots).length > 0) {
                textContent += "DOTS:\n";
                textContent += secondary.dots.deformities ? `  Deformities: ${secondary.dots.deformities}\n` : "";
                textContent += secondary.dots.openInjuries ? `  Open Injuries: ${secondary.dots.openInjuries}\n` : "";
                textContent += secondary.dots.tenderness ? `  Tenderness: ${secondary.dots.tenderness}\n` : "";
                textContent += secondary.dots.swelling ? `  Swelling: ${secondary.dots.swelling}\n` : "";
            }

            textContent += "\nVital Signs:\n";
            textContent += "------------\n";
            textContent += vitalSigns.levelOfConsciousness ? `Level of Consciousness: ${vitalSigns.levelOfConsciousness}\n` : "";
            textContent += vitalSigns.breathing ? `Breathing: ${vitalSigns.breathing} breaths/min\n` : "";
            textContent += vitalSigns.pulseRate ? `Pulse Rate: ${vitalSigns.pulseRate} beats/min\n` : "";
            textContent += vitalSigns.temperature ? `Temperature: ${vitalSigns.temperature} °C\n` : "";
            textContent += vitalSigns.painAssessment ? `Pain Assessment: ${vitalSigns.painAssessment}/9\n` : "";
            textContent += vitalSigns.oxygenSat ? `Oxygen SAT: ${vitalSigns.oxygenSat}%\n` : "";
            textContent += vitalSigns.oxygenProvided ? `Oxygen Provided: ${vitalSigns.oxygenProvided}\n` : "";
            textContent += vitalSigns.oxygenSerial ? `Oxygen Serial: ${vitalSigns.oxygenSerial}\n` : "";
            textContent += vitalSigns.bloodPressure ? `Blood Pressure: ${vitalSigns.bloodPressure} mmHg\n` : "";
            textContent += vitalSigns.glucose ? `Glucose: ${vitalSigns.glucose} mg/dL\n` : "";

            const blob = new Blob([textContent], { type: "text/plain;charset=utf-8" });
            const link = document.createElement("a");
            link.href = URL.createObjectURL(blob);
            link.download = "assessment_notes.txt";
            link.click();
            alert("All information saved to 'assessment_notes.txt'.");
        }

        function clearAll() {
            responses.primary = {
                levelOfConsciousness: {},
                airwayAndBreathing: { airway: {}, breathing: {} },
                circulation: []
            };
            responses.secondary = {};
            responses.vitalSigns = {};
            responses.additionalInfo = {};

            const additionalForm = document.getElementById("additional-form");
            additionalForm.reset();

            const sampleForm = document.getElementById("sample-form");
            const dotsForm = document.getElementById("dots-form");
            const vitalForm = document.getElementById("vital-form");
            sampleForm.reset();
            dotsForm.reset();
            vitalForm.reset();

            const buttons = document.querySelectorAll('.option-buttons button');
            buttons.forEach(btn => btn.classList.remove("selected"));

            document.getElementById("summary-content").innerHTML = "";
            hideSummary();

            alert("All data cleared.");
        }

        document.querySelectorAll('#vital-form input, #vital-form select').forEach(input => {
            input.addEventListener('change', () => {
                updateVitalResponses(new FormData(document.getElementById("vital-form")));
            });
        });
    </script>
</body>
</html>
